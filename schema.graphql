type Sale @entity(immutable: true) {
  id: Bytes! # UserToProduct entity id + counter

  productProxyAddress: Bytes!
  price: BigInt!
  points: BigInt!
  timestamp: BigInt!

  userToProduct: UserToProduct!
}

type User @entity {
  id: Bytes! # user address

  userToProduct: [UserToProduct!]! @derivedFrom(field: "user")
}

type UserToProduct @entity {
  id: Bytes! # user address + alias
  product: Bytes! # alias

  totalPoints: BigInt!
  counterOfSales: BigInt!

  user: User!
}